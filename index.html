<!--Raymond: My job was UI and overall structure of the website. I also did some work on integrating the SoundCloud API to the DOM. -->
<!--Kevin: My job was to leverage the CocktailDB API and use it to power our search engine. I also did some work integrating the search js into the DOM-->
<!--Collin: My job was to utilize the Soundclouod API and get it to output data; eg. Song Audio, Album cover, title, and artist of song based on the drink generated. -->
<!--Harbans: My job was to integrate the search API and push instructions onto DOM. -->

<!DOCTYPE html>
<html>
<head>
	<title>Drinking Decisions</title>

	<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.2/jcanvas.js"></script>
	<link rel="stylesheet" type="text/css" href="./assets/css/reset.css">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Permanent+Marker|Poppins:500" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="./assets/css/style.css">

</head>

<body>
<canvas class='group-logo' width="600px" height="600px"></canvas>
	

	<video class="background" autoplay muted loop>
		<source src="./assets/media/Collins_Loop.mp4" type="video/mp4" autoplay muted loop>
	</video>

		<audio id="landing-music" loop>
			<source src="./assets/media/juicebox_320kbps_130bpm.mp3" type="audio/mp3">
			</audio>

		
			<div class="landing-text">
				<h1 class="logo text">
					<span class='drinkingdecisions'>Drinking Decisions</span>
				</h1>
				<h3 class="slogan text">
					<span>Woop Woop!</span><span></span>
				</h3><br>
				<p class="landing-instructions text">Let's figure out how to customize drinks together!</p><br>
				
				<div class='martini-box'>
					<img src="./assets/media/drink_icon.png" class="martini">
					
					<div class='whoosh'>Let's begin.</div>
				</div>

			</div>		

<!--Top bar-->
		<header class="container-fluid head">
			<div class="row">
				<div class="col-lg-offset-2 col-lg-4">
					<h1 class="top-logo drinkingdecisions">Drinking Decisions</h1>
				</div>
				<div class="col-lg-offset-3 col-lg-3">
					<div class='random-centered random-title'> can't decide?
						<button class="random random-centered button main-title">Try Me!</button>
					</div>
				</div>
			</div>
		</header>
		
<!-- Ingredients UI -->
		<!--Ingredients Middle Box-->
		<div class='container-fluid ingredients-box'>
			<div class="row">
				<div class="col-lg-9">
					<label class="main-title">Type in your ingredients:</label>
					<input type="text" class="form-control" id="ingredients-input" placeholder="Minimum of 2 Ingredients">
					<div class='ingredients-choices'>
						<ul class='choices'></ul>
					</div>
				<!-- Width: 363px Height: 444px -->
				<!-- Top 263px Right: ???-1740px -->
			</div>
		</div>


		<!--Ingredients Sidebar-->
		<aside class="sidebar green" id="container">
			<div class="ingredients-side">
				<div class="title">Ingredients:</div>
				<div class="sidebox">
					<ul class='side-list'></ul>
				</div>
				<div class="ingredients-confirm">
					<img src="./assets/media/cocktail_shaker.png" class="shaker">
					<span class="shaker-text">Mix it Up.</span>
				</div>
			</div>
		</aside>


<!-- Instructions UI-->
		<!--Instructions Middle Box-->
		<div class='container-fluid instructions-box'>
			<div class="row">
				<div class="col-lg-9">

					<label class="main-title">Follow these instructions:</label> <!--10 margin 1 border-->
					<div class="instructions-list">
					</div>

					<!--Replace later-->
					<button class="next-step button main-title">Next Step.</button>

					<div class='receipt'>

						<!--DISPLAY NONE, THEN FADE IN ONCE LAST STEP APPEARS-->
						<img src='./assets/media/receipt_icon.png' class='receipt'>
						<div class='close-tab'>Close your bar tab.</div>
					</div>
				</div>
				<!--How to Do Section-->
				<div class="col-lg-3">



<!-- 					<div class="howdothis">
						<p> This is the part where you actually make something to drink. Just follow the instructions and hit next each time you complete whatever it says on the screen. Once you've completed all the steps, a receipt will appear and click it to go on to the next page. This shouldn't be too hard and you'll probably be fine assuming you're not already drunk. (Some of the measurements may not have a specific amount so just eyeball it.)</p> -->
					<div class="howdothis"><h2>Drink List:</h2>
						<ul class='drink-side-list' id="drinkList"></ul>
					</div>
				</div>
			</div>
		</div>



		<!--Instructions Sidebar-->
		<aside class="sidebar blue" id="container">
			<div class="ingredients-side">
				<div class ="title measurements">Measurements:</div>
				<div class="sidebox">
					<ul class='measurements-side-list' id="mesList"></ul>
				</div>
			</div>
		</aside>


	<!--Cheers UI-->
	<!--Cheers Middle Box-->
	<div class='container-fluid cheers-box'>
		<div class="row">
			<div class="col-lg-9">

				<label class="main-title">Here's your drink:</label>
				<div class="main-title drink" id="drinkName"></div>
				<div class="main-title" id="drinkImg"></div>
				<div class="main-title">That'll be $500.</div>

			</div>

			<!--What do now-->
			<div class="col-lg-3">
			</div>

		</div>
	</div>

	<!--Right panel Buttons-->
	<div class="right-panel">
		<div class="ingredients-mini right-side">Ingredients</div>
		<div class="instructions-mini right-side">Instructions</div>
		<div class="results-mini right-side">Cheers</div>
	</div>



	<script type="text/javascript">

//Logo to landing page functionality
setTimeout(function(){
	$('.landing-text').fadeIn(800);
	$('canvas').fadeOut(800);
	$('.background').fadeIn(800);
},2500);

var currentColor = "";


//Landing drink button transition to ingredients	
$(".martini-box").on('click', function(){
	$(".credits").fadeOut(850);

	$('.landing-text').fadeOut(850,'linear',function(){
		$('.head').fadeIn(400);
		$('.green').animate({left: '0px',},400);
		$('.ingredients-box').fadeIn(400);
		$('.ingredients-mini').fadeIn(400);
			// $('.smaller-logo').fadeIn(400);
		});

	currentColor = "green";

});


//INGREDIENTS PAGE FUNCTIONALITY
//Ingredients array to be pushed to API for random recipe
var finalIngredients = []; //Ask kevin wut the array should b called
var ingredientsCounter = 0;
//Dummy code
var dummyInstructionsArray = [];


//Array to ingredients list function
function choicesList(){
	//Takes input val
	var typedIngredient = $('input').val();

	//Used to empty page each keypress
	$('.choices').empty();
	//For loop to check through ingredients array
	for (var i = 0; i < ingredients.length; i++) {
		var converter = ingredients[i].toUpperCase();
		//Removes case sensitivity for easy comparison
		if (converter.indexOf(typedIngredient.toUpperCase()) != -1 && typedIngredient !== "" && typedIngredient !== " "){
			$('.ingredients-choices').css('display','block');
			$('.choices').append(
				'<li><a>' + ingredients[i] + '</a></li>'
				);
		} //if
		else if (typedIngredient === ""){
			$('.ingredients-choices').css('display','none');

		}//else if
	}//for loop
}//choicesList

//Ingredients options
$('.howdothis').on('click', '.exact-click', function(){
	$('.exact-ing').css('display', 'none');
	$('.buy-the-rest').css('display', 'block');
});

$('.howdothis').on('click', '.buy-click', function(){
	$('.buy-the-rest').css('display', 'none');
	$('.exact-ing').css('display', 'block');
});


//Ingredients input
$('input').on('keyup', function(){
	//Adds array to DOM
	choicesList();
}); //input onkeyup

$('.choices').on('click','a', function(){
	var textVal = $(this).text();
	var ogIndex = ingredients.indexOf(textVal);
	$('.side-list').append(
		'<li>' + '<div class="delete" data-index="' + ogIndex + '">' + 
		'<div class="one"></div><div class="two"></div>'+ 
		'</div>' + textVal + 
		'</li>'
	);
	//pushes to finalIngredients Array
	finalIngredients.push(textVal);
	addIng(textVal);
	
	//removes text from DOM
	$(this).parent().remove();
	console.log(ogIndex);

	//removes text from array
	ingredients.splice(ogIndex, 1);
	ingredientsCounter++;
	console.log(ingredientsCounter);
	$('input').val('');

	if (ingredientsCounter >= 2){
		console.log('yay');
		$('.ingredients-confirm').css('display', 'block');
	}
});//event delegation li a click

$('.side-list').on('click','.delete', function(){
	var textSide = $(this).parent().text();
	var dataIndex = $(this).attr('data-index');
	var intConverter = parseInt(dataIndex);

		//remove from finalIngredients Array
		var removalIndex = finalIngredients.indexOf(textSide);
		finalIngredients.splice(removalIndex,1);
		//readds text into array
		removeIng(textSide);
		ingredients.splice(intConverter,0,textSide);
		console.log(textSide);
		console.log(intConverter);
		$(this).parent().remove();

		//repeat function to readd dynamically to DOM
		choicesList();
		ingredientsCounter--;
		console.log(ingredientsCounter);


		if (ingredientsCounter <= 1){
			$('.ingredients-confirm').css('display', 'none');
		}
});

$('.ingredients-confirm').on('click','.shaker',function(){
// KEVINS FUNCTIONALITY - START
	$("#insList").empty(); // to clear DOM data related to previous drink
	$('.instructions-list').empty(); // to clear DOM data related to previous drink
	$("#mesList").empty(); // to clear DOM data related to previous drink
	$("#drinkList").empty(); // to clear DOM data related to previous drink
	$("#drinkImg").empty(); // to clear DOM data related to previous drink

	$('.green').animate({ left: '-300px'},400, function(){
		$('.blue').animate({ left: '0px'},400)
			//API CALL TO INSTRUCTIONS NEEDS TO BE DONE BEFORE FADEIN
			goShaker();
		});//can put callback function after linear

	$('.ingredients-box').fadeOut(400, function(){
		$('.instructions-box').fadeIn(400);
		$('.instructions-mini').fadeIn(400);
	});

	currentColor = "blue";
});//ingredients-confirm

	//Be able to go back to ingredients, change, hit confirm, then generates new instructions
	
	$('.receipt').on('click',function(){
		$('.blue').animate({ left: '-300px'},400, function(){
			$('.purple').animate({ left: '0px'},400)
			//API CALL TO INSTRUCTIONS NEEDS TO BE DONE BEFORE FADEIN

		});//can put callback function after linear
		$('.instructions-box').fadeOut(400, function(){
			$('.cheers-box').fadeIn(400);
			$('.results-mini').fadeIn(400);
		});

		currentColor = "purple";
	});
	
	$('.instructions-mini').on('click',function(){

		if (currentColor === "green"){
			$('.ingredients-box').fadeOut(400, function(){
				$('.instructions-box').fadeIn(400);
			});

			$('.green').animate({left: '-300px'},400, function(){
				$('.blue').animate({left: '0px',},400);
			});
		}

		else if (currentColor === "purple"){
			$('.cheers-box').fadeOut(400, function(){
				$('.instructions-box').fadeIn(400);
			});

			$('.purple').animate({left: '-300px'},400, function(){
				$('.blue').animate({left: '0px',},400);
			});
		}

		currentColor = "blue";
		console.log('Color is now: ' + currentColor);
	});


	$('.results-mini').on('click', function(){
		if (currentColor === "green"){
			$('.ingredients-box').fadeOut(400, function(){
				$('.cheers-box').fadeIn(400);
			});


			$('.green').animate({left: '-300px'},400, function(){
				$('.purple').animate({left: '0px',},400);
			});
		}

		else if (currentColor === "blue"){
			$('.instructions-box').fadeOut(400, function(){
				$('.cheers-box').fadeIn(400);
			});

			$('.blue').animate({left: '-300px'},400, function(){
				$('.purple').animate({left: '0px',},400);
			});
		};
		currentColor = "purple";
		console.log('Color is now: ' + currentColor);
	});


//Footer functionality
$('.about-icon').hover(function(){
	$('.vip-title').css('display','none');
	$('.about-title').css('display','block');

	},function(){
		$('.vip-title').css('display','block');
		$('.about-title').css('display','none');
});

$('.meet-icon').hover(function(){
	$('.vip-title').css('display','none');
	$('.meet-title').css('display','block');

	},function(){
		$('.vip-title').css('display','block');
		$('.meet-title').css('display','none');
});

$('.backroom-icon').hover(function(){
	$('.vip-title').css('display','none');
	$('.backroom-title').css('display','block');

	},function(){
		$('.vip-title').css('display','block');
		$('.backroom-title').css('display','none');
});

//setTimeout after overlay comes out for smoother transition.
$('.about-icon').on('click', function(){
	$('.overlay').css({'width':'100%', 'display':'block'});
	$('.about-overlay').css('display','block');
	setTimeout(function(){
		$('.about-overlay').css('opacity',1);
	},250)
});

$('.meet-icon').on('click', function(){
	// $('.overlay').css('display','block');
	$('.overlay').css({'width':'100%', 'display':'block'});
	$('.meet-overlay').css('display','block');
	setTimeout(function(){
		$('.meet-overlay').css('opacity',1);
	},250)
});

$('.backroom-icon').on('click', function(){
	// $('.overlay').css('display','block');
	$('.overlay').css({'width':'100%', 'display':'block'});
	$('.backroom-overlay').css('display','block');
	setTimeout(function(){
		$('.backroom-overlay').css('opacity',1);
	},250)
});



$('.overlay-container').on('click','.closebtn', function(){

	$('.overlay').css('width','0%');
	$('.about-overlay').css({'display':'none', 'opacity':0});
	$('.meet-overlay').css({'display':'none', 'opacity':0});
	$('.backroom-overlay').css({'display':'none', 'opacity':0});
});


$('.random').on('click', function(){
		$("#insList").empty();
    	$('.instructions-list').empty();
    	$("#mesList").empty();
    	$("#drinkImg").empty();
		$('.green').animate({ left: '-300px'},400, function(){
			$('.blue').animate({ left: '0px'},400)
		randomDrink();
		});//can put callback function after linear
		$('.ingredients-box').fadeOut(400, function(){
			$('.instructions-box').fadeIn(400);
			$('.instructions-mini').fadeIn(400);
		});
		currentColor = "blue";

	});

$('.ingredients-switcher').on('click', function(){
		toggleMode();
});

$(document).on("click", ".listed-drink",function() {
	combinedPairs = [];
    $("#insList").empty();
	$('.instructions-list').empty();
	$("#mesList").empty();
	$("#drinkImg").empty();
	var displayDrink = $(this).text();
	console.log(displayDrink);
	getRecipe(displayDrink);
});

</script>
</body>
</html>
